openapi: 3.0.0
servers: 
  - url: localhost://8089/api
info:
  description: This is a simple API
  version: "1.0.0"
  title: Simple Inventory API
  contact:
    email: you@your-company.com
  license:
    name: Apache 2.0
    url: 'http://www.apache.org/licenses/LICENSE-2.0.html'
tags:
  - name: stores
    description: List of game stores
  - name: genre
    description: List of game genres
  - name: storeGame
    description: The price and stock of a specific game in a specific store
paths:
  /stores:
    get:
      tags:
        - stores
      summary: get all stores
      operationId: getAllStores
      description: By passing in the appropriate options, you can search for stores
      parameters:
        - in: query
          name: order
          description: criteria for sorting the stores. it can be name, location, openHour, closeHour, '-name, -location, -openHour, -closeHour', for the reversed sorting
          schema:
            type: string
        - in: query
          name: name
          description: a store name to use as a filter
          required: false
          schema:
            type: string
        - in: query
          name: location
          description: a store name to use as a filter
          required: false
          schema:
            type: string
        - in: query
          name: titleGame
          description: a store name to use as a filter
          required: false
          schema:
            type: string
        - in: query
          name: openHour
          description: a store name to use as a filter
          required: false
          schema:
            type: string
            example: '11:10:00 or 11:15'
        - in: query
          name: closeHour
          description: a store name to use as a filter
          required: false
          schema:
            type: string
            example: '11:10:00 or 11:15'
        - in: query
          name: limit
          description: maximum number of stores to return
          schema:
            type: integer
            format: int32
            minimum: 0
        - in: query
          name: offset
          description: number of stores to skip for pagination
          schema:
            type: integer
            format: int32
            minimum: 0
      responses:
        '200':
          description: search results matching criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Store'
        '400':
          description: bad input parameter
    post:
      tags:
        - stores
      summary: adds a store
      operationId: addStore
      description: Adds a store to the system
      responses:
        '201':
          description: store created
        '400':
          description: 'invalid input, object invalid'
        '409':
          description: this store already exists
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Store'
        description: Store to add
    put:
      tags:
        - stores
      summary: Update a store
      operationId: updateStore
      responses:
        '201':
          description: store updated
        '400':
          description: 'invalid input, object invalid'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Store'
  /stores/{id}:
    get:
      tags:
        - stores
      summary: Returns a store by ID
      operationId: getStore
      parameters:
        - in: path
          name: id
          required: true
          description: The ID of the store to return
          schema:
            type: string
            example: 's0'
      responses:
        '200':
          description: A Store object
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Store'
        '400':
          description: The specified store ID is invalid
        '404':
          description: A store with the specified ID was not found
    delete:
      tags:
        - stores
      summary: deletes a store with the given ID
      operationId: deleteStore
      parameters:
        - in: path
          name: id
          required: true
          description: The ID of the store to return
          schema:
            type: string
            example: 's0'
      responses:
        '200':
          description: Store successfully deleted
        '400':
          description: The specified store ID is invalid
        '404':
          description: A store with the specified ID was not found
    post:
      tags:
        - storeGame
      summary: create a storeGame object and add it to a store
      operationId: addGameStore
      parameters:
        - in: path
          name: id
          required: true
          description: the ID of the store of which to add the game
          schema:
            type: string
            example: 's0'
      responses:
        '201':
          description: storeGame created
        '400':
          description: 'invalid input, object invalid'
        '409':
          description: this storeGame already exists
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreGame'
        description: StoreGame to add
    put:
      tags:
        - storeGame
      summary: Update a storeGame
      operationId: updateStoreGame
      parameters:
        - in: path
          name: id
          required: true
          description: the ID of the store from which to update the storeGame
          schema:
            type: string
            example: 's0'
      responses:
        '201':
          description: storeGame updated
        '400':
          description: 'invalid input, object invalid'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StoreGame'
  
  /stores/{id}/{gameId}:
    delete:
      tags:
        - storeGame
      summary: deletes a game with the given ID from the store with the given ID
      operationId: deleteGameFromStore
      parameters:
        - in: path
          name: id
          required: true
          description: The ID of the store from which to remove the game
          schema:
            type: string
            example: 's0'
        - in: path
          name: gameId
          required: true
          description: The ID of the game to remove
          schema:
            type: string
            example: 'g0'
      responses:
        '200':
          description: Game successfully removed
        '400':
          description: The specified game ID or store ID is invalid
        '404':
          description: A game with the specified ID was not found in the store with the specified ID
  /stores/cheapestGames:
    get:
      tags:
        - stores
      summary: get the the stores that sell the specified game the cheapest near the specified location
      operationId: getCheapestGamesInArea
      parameters:
        - in: query
          name: titleGame
          required: true
          description: the game title to look for
          schema:
            type: string
        - in: query
          name: location
          required: true
          description: the location to look close to
          schema:
            type: string
      responses:
        '200':
          description: search results matching criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Store'
        '400':
          description: bad input parameter
  
  /genres:
    get:
      tags:
        - genre
      summary: get all genres
      operationId: getAllGenres
      description: By passing in the appropriate options, you can search for genres
      parameters:
        - in: query
          name: order
          required: false
          description: criteria for sorting the stores. it can be name, description, '-name, -description', for the reversed
          schema:
            type: string
        - in: query
          name: q
          required: false
          description: a text parameter to search for in the genre name or the description
          schema:
            type: string
            example: 'adventure'
        - in: query
          name: offset
          description: number of genres to skip for pagination
          schema:
            type: integer
            format: int32
            minimum: 0
        - in: query
          name: limit
          description: maximum number of genres to return
          schema:
            type: integer
            format: int32
            minimum: 0
            maximum: 50
      responses:
        '200':
          description: search results matching criteria
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Genre'
        '400':
          description: bad input parameter
    post:
      tags:
        - genre
      summary: Add a new genre
      operationId: addGenre
      description: Create a new Genre
      responses:
        '201':
          description: item created
        '400':
          description: 'invalid input, object invalid'
        '409':
          description: an existing item already exists
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Genre'
        description: genre to add
    put:
      tags:
        - genre
      summary: Update a genre
      operationId: updateGenre
      responses:
        '201':
          description: genre updated
        '400':
          description: 'invalid input, object invalid'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Genre'
  /genres/{id}:
    get:
      tags:
        - genre
      summary: Returns a genre by ID
      operationId: getGenre
      parameters:
        - in: path
          name: id
          required: true
          description: The ID of the store to return
          schema:
            type: string
            example: 'gen0'
      responses:
        '200':
          description: A Genre object
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Genre'
        '400':
          description: The specified genre ID is invalid
        '404':
          description: A genre with the specified ID was not found
    delete:
      tags:
        - genre
      summary: deletes a genre with the given ID
      operationId: deleteGenre
      parameters:
        - in: path
          name: id
          required: true
          description: The ID of the store to return
          schema:
            type: string
            example: 'gen0'
      responses:
        '200':
          description: Genre successfully deleted
        '400':
          description: The specified genre ID is invalid
        '404':
          description: A genre with the specified ID was not found
  
components:
  schemas:
    Mode:
      type: string
      enum:
      - Individual
      - Cooperativo_local
      - Cooperativo_en_linea
      - Multijugador
      - PvP
    Genre:
      type: object
      required:
        - id
        - name
        - description
      properties:
        id:
          type: string
          example: 'gen0'
        name:
          type: string
          example: 'Action'
        description:
          type: string
          example: 'This is a test description'
    Platform:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          example: 'gen0'
        name:
          type: string
          example: 'Nintendo Switch'
    Developer:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          example: 'gen0'
        name:
          type: string
          example: 'Nintendo'
        year:
          type: integer
          format: year
          example: 2004
        country:
          type: string
          example: 'Japan'
    Game:
      type: object
      required:
        - id
        - title
        - year
        - description
      properties:
        id:
          type: string
          example: 'g0'
        title:
          type: string
          example: 'Super Mario Odyssey'
        description:
          type: string
          example: 'This is a test description for the game'
        year:
          type: integer
          format: year
          minimum: 1952
          example: 2004
        developer:
          $ref: '#/components/schemas/Developer'
        score:
          type: number
          format: double
          minimum: 0.0
          maximum: 10.0
          example: 9.5
        platforms:
          type: array
          items:
            $ref: '#/components/schemas/Platform'
        genres:
          type: array
          items:
            $ref: '#/components/schemas/Genre'
        modes:
          type: array
          items:
            $ref: '#/components/schemas/Mode'
    StoreGame:
      type: object
      required:
        - id
        - game
      properties:
        id:
          type: string
          example: 'o1'
        game:
          $ref: '#/components/schemas/Game'
        price:
          type: number
          format: double
          minimum: 0.0
          example: 5.5
        stock:
          type: integer
          format: integer32
          minimum: 0
          example: 5
    Store:
      type: object
      required:
        - id
        - name
      properties:
        id:
          type: string
          example: 's0'
        name:
          type: string
          example: 'Game Puerto Real'
        location:
          type: string
          format: address
          example: 'Calle Ruben Maduro, Puerto Real'
        openHour:
          type: string
          format: time
          example: '10:00'
        closeHour:
          type: string
          format: time
          example: '21:00'
        games:
          type: array
          items:
            $ref: '#/components/schemas/StoreGame'
        phone:
          type: string
          format: telephone
          example: '123456789'